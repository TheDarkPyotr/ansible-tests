---
- hosts: localhost
  vars:
      GITHUB_USERNAME: "TheDarkPyotr"
      GITHUB_REPO: "ansible-tests"

  gather_facts: no

  tasks:
    - name: Debug entire extra_vars JSON
      debug:
        msg: |-
          topology_descriptor: {{ topology_descriptor  | to_json }}
         
  
    - name: Root FS usage
      shell: df -h {{ FS_MOUNTPOINT }} | awk '{ print $5 }' | grep -v Use
      register: dfroot

    - debug:
        msg: "System {{ inventory_hostname }}'s root FS utilization is {{ dfroot.stdout }}"

    
    - include_tasks: vm_provisioning.yml
      vars:
        topology_desc: "{{ topology_descriptor }}"
        topology_validity: true
        awx_api_url: "http://131.159.25.106"
        awx_username: "admin"
        awx_password: "password"
        busy_vms_group: "busy_vms"
        cmvm_pool_group: "cmvm_pool"


