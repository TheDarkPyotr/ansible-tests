---
- hosts: localhost
  vars:
      GITHUB_USERNAME: "TheDarkPyotr"
      GITHUB_REPO: "ansible-tests"

  gather_facts: no

  tasks:
    - name: Debug entire extra_vars JSON
      debug:
        msg: |-
          topology_descriptor: {{ topology_descriptor  | to_json }}
         
  
    - name: Root FS usage
      shell: df -h {{ FS_MOUNTPOINT }} | awk '{ print $5 }' | grep -v Use
      register: dfroot

    - debug:
        msg: "System {{ inventory_hostname }}'s root FS utilization is {{ dfroot.stdout }}"

    
    - include_tasks: vm_provisioning.yml
      vars:
        topology_desc: "{{ topology_descriptor }}"
        topology_validity: true

